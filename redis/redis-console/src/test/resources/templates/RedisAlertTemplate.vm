<entry><htmlContent><![CDATA[
<html><head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>XPipe异常告警</title>
</head>
<body>
[XPipe异常告警]<br/>
[环境：<span style="color:red">${environment}</span>]<br/>
[项目: <span style="color:red">100004374 xpipe管理控制台</span>]<br/>
[异常名称: Redis 版本|配置 异常][时间: ${time}]<br/>
XPipe相关事宜请联系
    #foreach( $email in $xpipeAdminEmails ) ${email} | #end
<br/>

<div>
    -------------------
    <h4>从机房Redis版本错误</h4>
    <p>说明：XPipe从机房Redis应该为XRedis，且版本号大于等于0.0.3</p>
    <table border="1">
        <thead>
        <tr>
            <th>Redis集群</th>
            <th>Redis分片</th>
            <th>机器IP</th>
            <th>Redis端口</th>
        </tr>
        </thead>
        <tbody>
            #foreach( $redisAlert in $redisVersionAlerts )
                <tr>
                    <td>$redisAlert.getClusterId()</td>
                    <td>$redisAlert.getShardId()</td>
                    <td>$redisAlert.getHostPort().getHost()</td>
                    <td>$redisAlert.getHostPort().getPort()</td>
                </tr>
            #end
        </tbody>
    </table>
</div>
<div>
    -------------------
    <h4>Redis配置错误</h4>
    <p>说明：Redis配置项repl-diskless-sync在Redis版本2.8.22以下，应该为NO</p>
    <table border="1">
        <thead>
        <tr>
            <th>Redis集群</th>
            <th>Redis分片</th>
            <th>机器IP</th>
            <th>Redis端口</th>
        </tr>
        </thead>
        <tbody>
            #foreach( $redisAlert in $redisConfNotValidAlerts )
            <tr>
                <td>$redisAlert.getClusterId()</td>
                <td>$redisAlert.getShardId()</td>
                <td>$redisAlert.getHostPort().getHost()</td>
                <td>$redisAlert.getHostPort().getPort()</td>
            </tr>
            #end
        </tbody>
    </table>
</div>
<div>
    -------------------
    <h4>CRedis | XPipe 数据不一致</h4>
    <p>说明：发现CRedis和XPipe信息不一致</p>
    <table border="1">
        <thead>
        <tr>
            <th>Redis集群</th>
            <th>Redis分片</th>
            <th>日志信息</th>
        </tr>
        </thead>
        <tbody>
            #foreach( $redisAlert in $clientInconsisAlerts )
            <tr>
                <td>$redisAlert.getClusterId()</td>
                <td>$redisAlert.getShardId()</td>
                <td>$redisAlert.getMessage()</td>
            </tr>
            #end
        </tbody>
    </table>
</div>
<div>
    -------------------
    <h4>CRedis中实例故障或连接故障</h4>
    <p>说明：CRedis中实例不可读或不可用</p>
    <table border="1">
        <thead>
        <tr>
            <th>Redis集群</th>
            <th>Redis分片</th>
            <th>日志信息</th>
        </tr>
        </thead>
        <tbody>
            #foreach( $redisAlert in $clientInstanceNotOkAlerts )
            <tr>
                <td>$redisAlert.getClusterId()</td>
                <td>$redisAlert.getShardId()</td>
                <td>$redisAlert.getMessage()</td>
            </tr>
            #end
        </tbody>
    </table>
</div>
<div>
    -------------------
    <h4>Redis CONF REWRITE 错误</h4>
    <p>说明：Redis CONF REWRITE 错误</p>
    <table border="1">
        <thead>
        <tr>
            <th>Redis集群</th>
            <th>Redis分片</th>
            <th>日志信息</th>
        </tr>
        </thead>
        <tbody>
            #foreach( $redisAlert in $redisConfAlerts )
            <tr>
                <td>$redisAlert.getClusterId()</td>
                <td>$redisAlert.getShardId()</td>
                <td>$redisAlert.getMessage()</td>
            </tr>
            #end
        </tbody>
    </table>
</div>
</body>
</html>
]]></htmlContent></entry>